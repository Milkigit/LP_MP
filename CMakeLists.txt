project(LP_MP)

cmake_minimum_required(VERSION 2.8)
set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake/modules)

option(DOWNLOAD_DEPENDENCIES "Download and compile dependencies automatically" ON)
# Options
option(BUILD_GRAPH_MATCHING "Build graph matching" ON)
option(BUILD_GRAPH_MATCHING_EVALUATION "Build graph matching evaluation" OFF)
option(BUILD_MULTICUT "Build multicut" ON)
option(BUILD_MULTICUT_EVALUATION "Build multicut evaluation" OFF)
option(BUILD_MAX_CUT "Build max-cut" ON)
option(BUILD_GRAPHICAL_MODEL "Build graphical model" ON)
option(BUILD_DISCRETE_TOMOGRAPHY "Build discrete tomography solver" ON)
option(BUILD_CELL_TRACKING "Build cell tracking solver" OFF)
option(BUILD_MORAL_LINEAGE_TRACING "Build moral lineage tracing solver" OFF)
option(BUILD_CANDIDATE_MULTICUT "Build candidate multicut solver" OFF)
option(BUILD_DISCRETE_TOMOGRAPHY_EVALUATION "Build discrete tomography evaluation" OFF)
option(BUILD_TESTS "Build tests" ON)
option(WITH_GUROBI "LP interface to gurobi" OFF)
option(WITH_CPLEX "LP interface to Cplex" OFF)
option(WITH_SAT_BASED_ROUNDING "Use the lingeling SAT solver to decode a primal solution based on reparametrization" OFF)
option(PARALLEL_OPTIMIZATION "Enable parallel optimization" OFF)

include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/MQLib/include")
find_library(MAX_CUT_LIB NAMES MQLib.a PATHS "${CMAKE_CURRENT_SOURCE_DIR}/external/MQLib/bin")
#link_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/MQLib/bin/")

include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/libsimdpp")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/arboricity")
add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/external/arboricity")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/andres_graph/include")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/Catch/include")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/meta/include")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/PEGTL")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/opengm/include")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/cpp-sort/include")
include_directories("${CMAKE_CURRENT_SOURCE_DIR}/external/TCLAP/include")
#find_library(ARBORICITY NAMES libarboricity.a PATHS "${CMAKE_CURRENT_SOURCE_DIR}/external/arboricity")

if(DOWNLOAD_DEPENDENCIES)
   # download external projects here 
   project(DOWNLOAD_DEPENDENCIES_PROJECT NONE)
   include(cmake/SuperBuild.cmake)
   return()
else()
   project(LP_MP)
   include(cmake/LP_MP.cmake)
endif()
